"use strict";(self["webpackChunksalsavica"]=self["webpackChunksalsavica"]||[]).push([[28],{28:(a,e,l)=>{l.r(e),l.d(e,{default:()=>ga});var t=l(3673);function n(a,e,l,n,s,o){const i=(0,t.up)("form-pengeluaran");return(0,t.wg)(),(0,t.j4)(i,{editMode:!1,title:"Tambah"})}var s=l(2323),o=l(8880);const i={class:"col col-lg-12 col-md-6 col-sm-8 col-xs-10 q-pt-md"},r={class:"row q-mt-sm q-gutter-md"},u={class:"row col fit"},d={class:"col"},m={class:"col-2 q-table__title"},c={class:"text-caption"},g={class:"row q-gutter-sm"},p={class:"col"},h=(0,t._)("div",{class:"col"},null,-1),b={class:"row q-gutter-sm"},f={class:"col"},_=(0,t.Uk)(" Barang tidak ditemukan "),w={class:"col"},k={class:"col"},v=(0,t._)("div",{class:"col"},null,-1),q=(0,t._)("div",{class:"row q-mt-sm q-gutter-sm"},null,-1),W={class:"row q-gutter-sm"},y={class:"col"},P=(0,t._)("div",{class:"text-caption text-h6 text-grey-6"},"Harga barang",-1),x={class:"col"},j=(0,t._)("div",{class:"text-caption text-h6 text-grey-6"},"Total",-1),S=(0,t._)("div",{class:"col"},null,-1),B=(0,t._)("div",{class:"col"},null,-1),Z={class:"row q-gutter-sm q-mb-md q-mt-xs"},Q={class:"col"},V=(0,t._)("div",{class:"col"},null,-1),C={class:"row q-gutter-sm q-mb-md"},z={class:"col"},T={class:"row col fit"},U={class:"row q-gutter-sm items-center"},D={class:"col"},$={class:"col"},I=(0,t._)("div",null," Silahkan pilih barang yang akan di keluarkan (produksi). ",-1),F=(0,t._)("div",null," Masukan jumlah setiap barang yang akan di keluarkan. ",-1),M=(0,t._)("div",null," Berikan keterangan kegunaan barang di keluarkan lalu tekan submit. ",-1);function R(a,e,l,n,R,A){const E=(0,t.up)("q-breadcrumbs-el"),L=(0,t.up)("q-breadcrumbs"),N=(0,t.up)("q-card"),O=(0,t.up)("q-input"),H=(0,t.up)("q-item-label"),J=(0,t.up)("q-item-section"),K=(0,t.up)("q-item"),Y=(0,t.up)("q-select"),G=(0,t.up)("q-separator"),X=(0,t.up)("q-btn"),aa=(0,t.up)("q-form"),ea=(0,t.up)("q-card-section"),la=(0,t.up)("lottie"),ta=(0,t.up)("q-timeline-entry"),na=(0,t.up)("q-timeline"),sa=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(sa,{class:"q-pr-md q-pl-md q-pa-md"},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t.Wm)(N,{class:"my-card q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{separator:"---",class:"text-blue-10","active-color":"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{label:"Main Menu",icon:"widgets"}),(0,t.Wm)(E,{label:"Data Barang",icon:"extension"}),(0,t.Wm)(E,{label:"Pengeluaran",icon:"outbox"}),this.editMode?((0,t.wg)(),(0,t.j4)(E,{key:0,label:"Edit Pengeluaran",icon:"edit"})):((0,t.wg)(),(0,t.j4)(E,{key:1,label:"Tambah Pengeluaran",icon:"add"}))])),_:1})])),_:1}),(0,t._)("div",r,[(0,t._)("div",u,[(0,t.Wm)(N,{class:"my-card col",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(ea,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)(ea,{class:"col q-pa-lg"},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t._)("div",m,(0,s.zw)(this.title)+" Data Pengeluaran",1),(0,t._)("p",c,"Form "+(0,s.zw)(this.title)+" data pengeluaran salsafical.",1)]),(0,t.Wm)(aa,{onSubmit:A.onSubmit,onReset:A.onReset},{default:(0,t.w5)((()=>[(0,t._)("div",g,[(0,t._)("div",p,[(0,t.Wm)(O,{filled:"",modelValue:R.form.idPengeluaran,"onUpdate:modelValue":e[0]||(e[0]=a=>R.form.idPengeluaran=a),label:"Pengeluaran ID","lazy-rules":"",dense:"",readonly:"",rules:[a=>a&&a.length>0||"Please type something"]},null,8,["modelValue","rules"])]),h]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(R.form.datas,((a,e)=>((0,t.wg)(),(0,t.iD)("div",{key:e},[(0,t._)("div",b,[(0,t._)("div",f,[(0,t.Wm)(Y,{filled:"",modelValue:a.barang,"onUpdate:modelValue":e=>a.barang=e,label:"Nama Barang","option-value":"_id","option-label":"namaBarang",options:R.options.barangs,"use-input":"",onFilter:A.filterData,outlined:"",dense:"",rules:[a=>a||"Barang tidak boleh kosong !"]},{option:(0,t.w5)((a=>[(0,t.Wm)(K,(0,s.vs)((0,t.F4)(a.itemProps)),{default:(0,t.w5)((()=>[(0,t.Wm)(J,null,{default:(0,t.w5)((()=>[(0,t.Wm)(H,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(a.opt.namaBarang),1)])),_:2},1024),(0,t.Wm)(H,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)("stok - "+(0,s.zw)(a.opt.stok),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"no-option":(0,t.w5)((()=>[(0,t.Wm)(K,null,{default:(0,t.w5)((()=>[(0,t.Wm)(J,{class:"text-grey"},{default:(0,t.w5)((()=>[_])),_:1})])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue","options","onFilter","rules"])]),(0,t._)("div",w,[(0,t._)("div",k,[(0,t.Wm)(O,{disable:null===a.barang,filled:"",modelValue:a.jumlahPengeluaran,"onUpdate:modelValue":e=>a.jumlahPengeluaran=e,label:"Jumlah pengeluaran","lazy-rules":"",dense:"",rules:[a=>a&&a>0||"Jumlah pengeluaran tidak boleh 0 dan harus angka !",e=>e&&e<=a.barang.stok||"Jumlah pengeluaran melebihi stok ! ("+a.barang.stok+")"]},null,8,["disable","modelValue","onUpdate:modelValue","rules"])]),v])]),q,(0,t.Wm)(G,{class:"q-mt-xs q-mb-xs"}),(0,t._)("div",W,[(0,t._)("div",y,[P,(0,t.Uk)(" "+(0,s.zw)(this.$formatPrice(a.barang?a.barang.hargaSatuan:0)),1)]),(0,t._)("div",x,[j,(0,t.Uk)(" "+(0,s.zw)(this.$formatPrice(a.barang?a.barang.hargaSatuan*a.jumlahPengeluaran:0)),1)]),S,B]),(0,t._)("div",Z,[(0,t._)("div",Q,[(0,t.wy)((0,t.Wm)(X,{size:"sm",outline:"",class:"q-mr-md",icon:"add",type:"submit",color:"green",onClick:a=>A.add(e)},null,8,["onClick"]),[[o.F8,e==R.form.datas.length-1]]),(0,t.wy)((0,t.Wm)(X,{size:"sm",outline:"",icon:"delete_outline",type:"submit",color:"red",onClick:a=>A.remove(e)},null,8,["onClick"]),[[o.F8,e||!e&&R.form.datas.length>1]])]),V])])))),128)),(0,t._)("div",C,[(0,t._)("div",z,[(0,t.Wm)(O,{modelValue:R.form.keterangan,"onUpdate:modelValue":e[1]||(e[1]=a=>R.form.keterangan=a),filled:"",dense:"",label:"Keterangan",type:"textarea"},null,8,["modelValue"])])]),(0,t._)("div",null,[(0,t.Wm)(X,{label:"Submit",outline:"",type:"submit",color:"green",style:{width:"150px"}}),(0,t.Wm)(X,{label:"Reset",type:"reset",color:"red",outline:"",class:"q-ml-sm",style:{width:"150px"}})])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1})]),(0,t._)("div",T,[(0,t.Wm)(N,{class:"my-card q-pa-md col bg-blue-10"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{separator:"---",class:"text-white","active-color":"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{label:"Petunjuk penggunaan",icon:"lightbulb"})])),_:1})])),_:1}),(0,t.Wm)(N,{class:"my-card row q-mt-md",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(ea,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)(ea,{class:"col"},{default:(0,t.w5)((()=>[(0,t._)("div",U,[(0,t._)("div",D,[(0,t.Wm)(la,{options:R.defaultOptions,onAnimCreated:A.handleAnimation,style:{height:"250px"}},null,8,["options","onAnimCreated"])]),(0,t._)("div",$,[(0,t.Wm)(na,{color:"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(ta,{subtitle:"Tahap I",side:"left"},{default:(0,t.w5)((()=>[I])),_:1}),(0,t.Wm)(ta,{subtitle:"Tahap 2",side:"right"},{default:(0,t.w5)((()=>[F])),_:1}),(0,t.Wm)(ta,{subtitle:"Tahap 3",side:"right"},{default:(0,t.w5)((()=>[M])),_:1})])),_:1})])])])),_:1})])),_:1})])),_:1})])])])])),_:1})}var A=l(3945),E=l(3535);let L=[];const N={components:{lottie:A.Z},props:{editMode:Boolean,title:String},data(){return{form:{idPengeluaran:this.$generateId(),datas:[{barang:null,jumlahPengeluaran:null}],keterangan:null},options:{barangs:[],status:["Lunas","Hutang"]},defaultOptions:{animationData:E},animationSpeed:2}},created(){this.getBarang()},methods:{handleAnimation:function(a){this.anim=a},stop:function(){this.anim.stop()},play:function(){this.anim.play()},pause:function(){this.anim.pause()},onSpeedChange:function(){this.anim.setSpeed(this.animationSpeed)},getBarang(){this.$api.get("pembelian/detail").then((a=>{L=a.data.result.filter((a=>a.stok>0))}))},filterData(a,e){e(""!==a?()=>{const e=a.toLowerCase();this.options.barangs=L.filter((a=>a.namaBarang.toLowerCase().indexOf(e)>-1))}:()=>{this.options.barangs=L})},onSubmit(){let a=0;const e=this.form.datas.map((a=>({ObjectId:a.barang._id,namaBarang:a.barang.namaBarang,hargaBarang:a.barang.hargaSatuan,jumlahPengeluaran:a.jumlahPengeluaran,total:a.jumlahPengeluaran*a.barang.hargaSatuan,stokBaru:a.barang.stok-a.jumlahPengeluaran})));e.forEach((e=>{a+=e.total}));const l={idPengeluaran:this.form.idPengeluaran,barangs:e,grandTotal:a,keterangan:this.form.keterangan};try{this.$api.post("pengeluaran/add",l).then((a=>{!0!==a.data.status?this.$showNotif(a.data.message,"negative"):(this.$router.go(-1),this.$showNotif("Data penjualan berhasil di input !","positive"))}))}catch(t){this.$showNotif("Terjadi kesalahan !","negative")}},onReset(){for(const a in this.form.datas)this.form.datas[a].barang=null,this.form.datas[a].jumlahPengeluaran=null,a>0&&this.form.datas.splice(a);this.form.keterangan=null},add(a){this.form.datas.push({barang:null,jumlahPengeluaran:null})},remove(a){this.form.datas.splice(a,1)}}};var O=l(4379),H=l(151),J=l(1481),K=l(5926),Y=l(5589),G=l(1993),X=l(5269),aa=l(4689),ea=l(3314),la=l(3414),ta=l(2035),na=l(2350),sa=l(5869),oa=l(2165),ia=l(1432),ra=l(3424),ua=l(7518),da=l.n(ua);N.render=R;const ma=N;da()(N,"components",{QPage:O.Z,QCard:H.Z,QBreadcrumbs:J.Z,QBreadcrumbsEl:K.Z,QCardSection:Y.Z,QTable:G.Z,QForm:X.Z,QInput:aa.Z,QSelect:ea.Z,QItem:la.Z,QItemSection:ta.Z,QItemLabel:na.Z,QSeparator:sa.Z,QBtn:oa.Z,QTimeline:ia.Z,QTimelineEntry:ra.Z});const ca={components:{formPengeluaran:ma}};ca.render=n;const ga=ca}}]);