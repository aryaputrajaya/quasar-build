"use strict";(self["webpackChunksalsavica"]=self["webpackChunksalsavica"]||[]).push([[5473],{5473:(t,a,e)=>{e.r(a),e.d(a,{default:()=>it});var l=e(3673);function o(t,a,e,o,n,s){const u=(0,l.up)("form-retur");return(0,l.wg)(),(0,l.j4)(u,{editMode:!1,title:"Tambah"})}var n=e(2323);const s={class:"col col-lg-12 col-md-6 col-sm-8 col-xs-10 q-pt-md"},u={class:"row q-mt-sm q-gutter-md"},r={class:"row col fit"},i={class:"col"},d={class:"col-2 q-table__title"},m={class:"text-caption"},c={class:"row q-gutter-sm"},p={class:"col"},h=(0,l._)("div",{class:"col"},null,-1),_={class:"row q-gutter-sm"},f={class:"col"},g={class:"col"},b=(0,l.Uk)(" Produk tidak ditemukan "),w={class:"row q-mt-sm q-gutter-sm"},j={class:"col"},v=(0,l.Uk)(" Produk tidak ditemukan "),k={class:"col"},q={class:"row q-gutter-sm q-mb-md"},W={class:"col"},y=(0,l._)("div",{class:"text-caption text-h6 text-grey-6"},"Harga barang",-1),x={class:"col"},P=(0,l._)("div",{class:"text-caption text-h6 text-grey-6"},"Total",-1),V=(0,l._)("div",{class:"col"},null,-1),S=(0,l._)("div",{class:"col"},null,-1),Z={class:"row q-gutter-sm q-mb-md"},Q={class:"col"},T={class:"row col fit"},U={class:"row q-gutter-sm items-center"},z={class:"col"},C={class:"col"},R=(0,l._)("div",null," Silahkan pilih barang yang akan di keluarkan (produksi). ",-1),$=(0,l._)("div",null," Masukan jumlah setiap barang yang akan di keluarkan. ",-1),B=(0,l._)("div",null," Berikan keterangan kegunaan barang di keluarkan lalu tekan submit. ",-1);function F(t,a,e,o,F,I){const M=(0,l.up)("q-breadcrumbs-el"),D=(0,l.up)("q-breadcrumbs"),A=(0,l.up)("q-card"),E=(0,l.up)("q-input"),N=(0,l.up)("q-select"),O=(0,l.up)("q-item-section"),J=(0,l.up)("q-item"),L=(0,l.up)("q-separator"),H=(0,l.up)("q-btn"),K=(0,l.up)("q-form"),G=(0,l.up)("q-card-section"),X=(0,l.up)("lottie"),Y=(0,l.up)("q-timeline-entry"),tt=(0,l.up)("q-timeline"),at=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(at,{class:"q-pr-md q-pl-md q-pa-md"},{default:(0,l.w5)((()=>[(0,l._)("div",s,[(0,l.Wm)(A,{class:"my-card q-pa-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{separator:"---",class:"text-blue-10","active-color":"secondary"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{label:"Main Menu",icon:"widgets"}),(0,l.Wm)(M,{label:"Data Barang",icon:"extension"}),(0,l.Wm)(M,{label:"Retur",icon:"cached"}),this.editMode?((0,l.wg)(),(0,l.j4)(M,{key:0,label:"Edit Retur",icon:"edit"})):((0,l.wg)(),(0,l.j4)(M,{key:1,label:"Tambah Retur",icon:"add"}))])),_:1})])),_:1}),(0,l._)("div",u,[(0,l._)("div",r,[(0,l.Wm)(A,{class:"my-card col",flat:"",bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{horizontal:""},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{class:"col q-pa-lg"},{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l._)("div",d,(0,n.zw)(this.title)+" Data Pengeluaran",1),(0,l._)("p",m,"Form "+(0,n.zw)(this.title)+" data pengeluaran salsafical.",1)]),(0,l.Wm)(K,{onSubmit:I.onSubmit,onReset:I.onReset},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l._)("div",p,[(0,l.Wm)(E,{filled:"",modelValue:F.form.id_pengeluaran,"onUpdate:modelValue":a[0]||(a[0]=t=>F.form.id_pengeluaran=t),label:"Pengeluaran ID","lazy-rules":"",dense:"",readonly:"",rules:[t=>t&&t.length>0||"Please type something"]},null,8,["modelValue","rules"])]),h]),(0,l._)("div",_,[(0,l._)("div",f,[(0,l.Wm)(N,{outlined:"",modelValue:F.form.jenis_retur,"onUpdate:modelValue":a[1]||(a[1]=t=>F.form.jenis_retur=t),dense:"","lazy-rules":"",filled:"",options:F.options.jenis_retur,label:"Jenis retur barang"},null,8,["modelValue","options"])]),(0,l._)("div",g,[(0,l.Wm)(N,{filled:"",modelValue:t.product,"onUpdate:modelValue":a[2]||(a[2]=a=>t.product=a),label:"Supplier / Pelanggan","option-value":"_id","option-label":"nama_product",options:F.options.products,"use-input":"",onFilter:I.filterProduct,outlined:"",dense:""},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(J,null,{default:(0,l.w5)((()=>[(0,l.Wm)(O,{class:"text-grey"},{default:(0,l.w5)((()=>[b])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])])]),(0,l._)("div",w,[(0,l._)("div",j,[(0,l.Wm)(N,{filled:"",modelValue:t.product,"onUpdate:modelValue":a[3]||(a[3]=a=>t.product=a),label:"Nama barang","option-value":"_id","option-label":"nama_product",options:F.options.product,"use-input":"",onFilter:I.filterProduct,outlined:"",dense:""},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(J,null,{default:(0,l.w5)((()=>[(0,l.Wm)(O,{class:"text-grey"},{default:(0,l.w5)((()=>[v])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,l._)("div",k,[(0,l.Wm)(E,{filled:"",modelValue:F.form.jumlah_retur,"onUpdate:modelValue":a[4]||(a[4]=t=>F.form.jumlah_retur=t),label:"Jumlah barang retur","lazy-rules":"",dense:"",rules:[t=>t&&t.length>0||"Please type something"]},null,8,["modelValue","rules"])])]),(0,l.Wm)(L,{class:"q-mt-xs q-mb-xs"}),(0,l._)("div",q,[(0,l._)("div",W,[y,(0,l.Uk)(" "+(0,n.zw)(this.$formatPrice(t.product?t.product.harga_jual:0)),1)]),(0,l._)("div",x,[P,(0,l.Uk)(" "+(0,n.zw)(this.$formatPrice(t.product?t.product.harga_jual*t.product.jumlah_penjualan:0)),1)]),V,S]),(0,l._)("div",Z,[(0,l._)("div",Q,[(0,l.Wm)(E,{modelValue:F.form.keterangan_product,"onUpdate:modelValue":a[5]||(a[5]=t=>F.form.keterangan_product=t),filled:"",dense:"",label:"Keterangan",type:"textarea"},null,8,["modelValue"])])]),(0,l._)("div",null,[(0,l.Wm)(H,{label:"Submit",outline:"",type:"submit",color:"green",style:{width:"150px"}}),(0,l.Wm)(H,{label:"Reset",type:"reset",color:"red",outline:"",class:"q-ml-sm",style:{width:"150px"}})])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1})]),(0,l._)("div",T,[(0,l.Wm)(A,{class:"my-card q-pa-md col bg-blue-10"},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{separator:"---",class:"text-white","active-color":"secondary"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{label:"Petunjuk penggunaan",icon:"lightbulb"})])),_:1})])),_:1}),(0,l.Wm)(A,{class:"my-card row q-mt-md",flat:"",bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{horizontal:""},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{class:"col"},{default:(0,l.w5)((()=>[(0,l._)("div",U,[(0,l._)("div",z,[(0,l.Wm)(X,{options:F.defaultOptions,onAnimCreated:I.handleAnimation,style:{height:"250px"}},null,8,["options","onAnimCreated"])]),(0,l._)("div",C,[(0,l.Wm)(tt,{color:"secondary"},{default:(0,l.w5)((()=>[(0,l.Wm)(Y,{subtitle:"Tahap I",side:"left"},{default:(0,l.w5)((()=>[R])),_:1}),(0,l.Wm)(Y,{subtitle:"Tahap 2",side:"right"},{default:(0,l.w5)((()=>[$])),_:1}),(0,l.Wm)(Y,{subtitle:"Tahap 3",side:"right"},{default:(0,l.w5)((()=>[B])),_:1})])),_:1})])])])),_:1})])),_:1})])),_:1})])])])])),_:1})}var I=e(3945),M=e(3535);let D=[];const A={components:{lottie:I.Z},props:{editMode:Boolean,title:String},data(){return{form:{id_pengeluaran:this.$generateId(),products:[{product:null,jumlah_penjualan:null}],tanggal_jatuh_tempo:null,alamat_penagihan:null,nomor_telepon:null,pelanggan:null,keterangan_product:null,status_penjualan:null},options:{products:[],jenis_retur:["Penjualan","Pembelian"]},defaultOptions:{animationData:M},animationSpeed:2}},created(){this.getProduct()},methods:{handleAnimation:function(t){this.anim=t},stop:function(){this.anim.stop()},play:function(){this.anim.play()},pause:function(){this.anim.pause()},onSpeedChange:function(){this.anim.setSpeed(this.animationSpeed)},getProduct(){this.$api.get("product/get").then((t=>{D=t.data.result}))},filterProduct(t,a){a(""!==t?()=>{const a=t.toLowerCase();this.options.products=D.filter((t=>t.nama_product.toLowerCase().indexOf(a)>-1))}:()=>{this.options.products=D})},onSubmit(){const t=[];let a=0;for(const o in this.form.products)t.push({object_id:this.form.products[o].product._id,nama_product:this.form.products[o].product.nama_product,harga_jual:this.form.products[o].product.harga_jual,jumlah_penjualan:this.form.products[o].jumlah_penjualan,total:this.form.products[o].product.harga_jual*this.form.products[o].jumlah_penjualan,stokBaru:this.form.products[o].product.stok-this.form.products[o].jumlah_penjualan});t.forEach((t=>{a+=t.total}));const e={id_penjualan:this.form.id_penjualan,products:t,grandTotal:a,tanggal_jatuh_tempo:this.form.tanggal_jatuh_tempo,alamat_penagihan:this.form.alamat_penagihan,nomor_telepon:this.form.nomor_telepon,pelanggan:this.form.pelanggan,status_penjualan:this.form.status_penjualan};try{this.$api.post("penjualan/add",e).then((t=>{!0!==t.data.status?this.$showNotif(t.data.message,"negative"):(this.$router.go(-1),this.$showNotif("Data penjualan berhasil di input !","positive"))}))}catch(l){this.$showNotif("Terjadi kesalahan !","negative")}},onReset(){for(const t in this.form.products)this.form.products[t].product=null,this.form.products[t].jumlah_penjualan=null,t>0&&this.form.products.splice(t,1);this.form.tanggal_jatuh_tempo=null,this.form.alamat_penagihan=null,this.form.nomor_telepon=null,this.form.pelanggan=null,this.form.status_penjualan=null},add(t){this.form.products.push({product:null,jumlah_penjualan:null})},remove(t){this.form.products.splice(t,1)}}};var E=e(4379),N=e(151),O=e(1481),J=e(5926),L=e(5589),H=e(1993),K=e(5269),G=e(4689),X=e(3314),Y=e(3414),tt=e(2035),at=e(5869),et=e(2165),lt=e(1432),ot=e(3424),nt=e(7518),st=e.n(nt);A.render=F;const ut=A;st()(A,"components",{QPage:E.Z,QCard:N.Z,QBreadcrumbs:O.Z,QBreadcrumbsEl:J.Z,QCardSection:L.Z,QTable:H.Z,QForm:K.Z,QInput:G.Z,QSelect:X.Z,QItem:Y.Z,QItemSection:tt.Z,QSeparator:at.Z,QBtn:et.Z,QTimeline:lt.Z,QTimelineEntry:ot.Z});const rt={components:{formRetur:ut}};rt.render=o;const it=rt}}]);