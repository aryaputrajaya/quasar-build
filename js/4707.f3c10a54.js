"use strict";(self["webpackChunksalsavica"]=self["webpackChunksalsavica"]||[]).push([[4707],{4707:(a,e,l)=>{l.r(e),l.d(e,{default:()=>_a});var t=l(3673);function n(a,e,l,n,s,o){const i=(0,t.up)("form-pembelian");return(0,t.wg)(),(0,t.j4)(i,{editMode:!1,title:"Tambah"})}var s=l(2323),o=l(8880);const i={class:"col col-lg-12 col-md-6 col-sm-8 col-xs-10 q-pt-md"},u={class:"row q-mt-sm q-gutter-md"},m={class:"row col fit"},r={class:"col"},d={class:"col-2 q-table__title"},p={class:"text-caption"},c={class:"row q-gutter-sm"},g={class:"col"},h=(0,t._)("div",{class:"col"},null,-1),b={class:"row q-gutter-sm"},f={class:"col"},_={class:"col"},k={class:"row q-gutter-sm"},w={class:"col"},v={class:"col"},y=(0,t._)("label",{class:"text-h6 text-subtitle2"},"%",-1),j={class:"row q-gutter-sm"},S={class:"col"},V={class:"col"},W=(0,t._)("div",{class:"text-caption text-h6 text-grey-6"},"Total per barang",-1),q={class:"row q-gutter-sm q-mb-md"},P={class:"col"},T=(0,t._)("div",{class:"col"},null,-1),U={class:"row q-gutter-sm"},z={class:"col"},D={class:"col"},Z={class:"row q-gutter-sm"},Q={class:"col"},x={class:"col"},B={key:0,class:"row q-gutter-sm"},C={class:"col"},M={class:"col"},J={class:"row items-center justify-end"},N={class:"row col fit"},Y={class:"row q-gutter-sm items-center"},$={class:"col"},A={class:"col"},H=(0,t._)("div",null," Silahkan masukan nama barang yang dibeli melalui supplier. ",-1),I=(0,t._)("div",null," Selanjutnya masukan jumlah pembelian, harga barang persatuan, jumlah pajak yang ahrus dibayar per barang serta deskripsi barang. ",-1),R=(0,t._)("div",null," Masukan status pembelian, hutang atau beli lunas, jika pembelian dengan status hutang masukan data tanggal jatuh tempo serta alamat supplier untuk proses konfirmasi pembayaran. ",-1),E=(0,t._)("div",null," Pastikan seluruh data sudah benar lalu tekan tombol submit untuk melakukan input data pembelian. ",-1);function F(a,e,l,n,F,L){const O=(0,t.up)("q-breadcrumbs-el"),K=(0,t.up)("q-breadcrumbs"),G=(0,t.up)("q-card"),X=(0,t.up)("q-input"),aa=(0,t.up)("q-btn"),ea=(0,t.up)("q-select"),la=(0,t.up)("q-date"),ta=(0,t.up)("q-popup-proxy"),na=(0,t.up)("q-icon"),sa=(0,t.up)("q-form"),oa=(0,t.up)("q-card-section"),ia=(0,t.up)("lottie"),ua=(0,t.up)("q-timeline-entry"),ma=(0,t.up)("q-timeline"),ra=(0,t.up)("q-page"),da=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(ra,{class:"q-pr-md q-pl-md q-pa-md"},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t.Wm)(G,{class:"my-card q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{separator:"---",class:"text-blue-10","active-color":"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(O,{label:"Main Menu",icon:"widgets"}),(0,t.Wm)(O,{label:"Data Barang",icon:"extension"}),(0,t.Wm)(O,{label:"Pembelian",icon:"shopping_bag"}),this.editMode?((0,t.wg)(),(0,t.j4)(O,{key:0,label:"Edit Pembelian",icon:"edit"})):((0,t.wg)(),(0,t.j4)(O,{key:1,label:"Tambah Pembelian",icon:"add"}))])),_:1})])),_:1}),(0,t._)("div",u,[(0,t._)("div",m,[(0,t.Wm)(G,{class:"my-card col",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(oa,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)(oa,{class:"col q-pa-lg"},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t._)("div",d,(0,s.zw)(this.title)+" Data Pembelian",1),(0,t._)("p",p,"Form "+(0,s.zw)(this.title)+" data pembelian salsafical.",1)]),(0,t.Wm)(sa,{onSubmit:L.onSubmit,onReset:L.onReset},{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t._)("div",g,[(0,t.Wm)(X,{filled:"",modelValue:F.form.id_pembelian,"onUpdate:modelValue":e[0]||(e[0]=a=>F.form.id_pembelian=a),label:"Pembelian ID","lazy-rules":"",dense:"",readonly:"",rules:[a=>a&&a.length>0||"Please type something"]},null,8,["modelValue","rules"])]),h]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(F.form.barangs,((a,e)=>((0,t.wg)(),(0,t.iD)("div",{key:e},[(0,t._)("div",b,[(0,t._)("div",f,[(0,t.Wm)(X,{filled:"",modelValue:a.namaBarang,"onUpdate:modelValue":e=>a.namaBarang=e,label:"Nama barang","lazy-rules":"",dense:"",rules:[a=>a&&a.length>0||"Nama barang tidak boleh kosong !"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),(0,t._)("div",_,[(0,t.Wm)(X,{filled:"",modelValue:a.jumlahPembelian,"onUpdate:modelValue":e=>a.jumlahPembelian=e,label:"Jumlah pembelian","lazy-rules":"",dense:"",rules:[a=>a&&a>0||"Jumlah pembelian tidak boleh 0 / kosong !"]},null,8,["modelValue","onUpdate:modelValue","rules"])])]),(0,t._)("div",k,[(0,t._)("div",w,[(0,t.Wm)(X,{filled:"",modelValue:a.hargaSatuan,"onUpdate:modelValue":e=>a.hargaSatuan=e,label:"Harga satuan","lazy-rules":"",dense:"",rules:[a=>a&&a>0||"Harga satuan tidak boleh 0 / kosong !"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),(0,t._)("div",v,[(0,t.Wm)(X,{filled:"",modelValue:a.pajak,"onUpdate:modelValue":e=>a.pajak=e,label:"Pajak","lazy-rules":"",dense:"",rules:[a=>a&&a>0||"Pajak tidak boleh 0 / kosong !"]},{append:(0,t.w5)((()=>[y])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])])]),(0,t._)("div",j,[(0,t._)("div",S,[(0,t.Wm)(X,{filled:"",modelValue:a.deskripsi,"onUpdate:modelValue":e=>a.deskripsi=e,label:"Deskripsi","lazy-rules":"",dense:"",rules:[a=>a&&a.length>0||"Deskripsi barang tidak boleh 0 / kosong !"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),(0,t._)("div",V,[W,(0,t.Uk)(" "+(0,s.zw)(this.$formatPrice(a.jumlahPembelian&&a.hargaSatuan&&a.pajak?a.jumlahPembelian*a.hargaSatuan+a.jumlahPembelian*a.hargaSatuan*a.pajak/100:0)),1)])]),(0,t._)("div",q,[(0,t._)("div",P,[(0,t.wy)((0,t.Wm)(aa,{size:"sm",outline:"",class:"q-mr-md",icon:"add",type:"submit",color:"green",onClick:a=>L.add(e)},null,8,["onClick"]),[[o.F8,e==F.form.barangs.length-1]]),(0,t.wy)((0,t.Wm)(aa,{size:"sm",outline:"",icon:"delete_outline",type:"submit",color:"red",onClick:a=>L.remove(e)},null,8,["onClick"]),[[o.F8,e||!e&&F.form.barangs.length>1]])]),T])])))),128)),(0,t._)("div",U,[(0,t._)("div",z,[(0,t.Wm)(ea,{outlined:"",modelValue:F.form.statusPembelian,"onUpdate:modelValue":e[1]||(e[1]=a=>F.form.statusPembelian=a),dense:"","lazy-rules":"",filled:"",options:F.options.status,label:"Status pembelian"},null,8,["modelValue","options"])]),(0,t._)("div",D,[(0,t.Wm)(ea,{filled:"",modelValue:F.form.namaSupplier,"onUpdate:modelValue":e[2]||(e[2]=a=>F.form.namaSupplier=a),label:"Nama Supplier","option-label":"namaSupplier","option-value":"id_supplier",options:F.namaSupplier,outlined:"",dense:"",rules:[a=>a||"Nama produk tidak boleh kosong !"]},null,8,["modelValue","options","rules"])])]),(0,t._)("div",Z,[(0,t._)("div",Q,[(0,t.Wm)(X,{filled:"",modelValue:F.form.deskripsi,"onUpdate:modelValue":e[3]||(e[3]=a=>F.form.deskripsi=a),label:"Deskripsi","lazy-rules":"",dense:"",rules:[a=>a&&a.length>0||"Deskripsi barang tidak boleh 0 / kosong !"]},null,8,["modelValue","rules"])]),(0,t._)("div",x,[(0,t.Wm)(X,{filled:"",modelValue:F.form.nomorTelepon,"onUpdate:modelValue":e[4]||(e[4]=a=>F.form.nomorTelepon=a),label:"Nomor Telepon","lazy-rules":"",dense:"",rules:[a=>a&&a.length>0||"Lengkapi data nomor telepon"]},null,8,["modelValue","rules"])])]),"Hutang"===this.form.statusPembelian?((0,t.wg)(),(0,t.iD)("div",B,[(0,t._)("div",C,[(0,t.Wm)(X,{filled:"",modelValue:F.form.alamatSupplier,"onUpdate:modelValue":e[5]||(e[5]=a=>F.form.alamatSupplier=a),label:"Alamat supplier","lazy-rules":"",dense:"",rules:[a=>a&&a.length>0||"Lengkapi data alamat supplier"]},null,8,["modelValue","rules"])]),(0,t._)("div",M,[(0,t.Wm)(X,{modelValue:F.form.tanggalJatuhTempo,"onUpdate:modelValue":e[7]||(e[7]=a=>F.form.tanggalJatuhTempo=a),filled:"",label:"Tanggal jatuh tempo",dense:"",rules:["YYYY-MM-DD"]},{append:(0,t.w5)((()=>[(0,t.Wm)(na,{name:"event",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(ta,{ref:"form.tanggal_jatuh_tempo",breakpoint:600},{default:(0,t.w5)((()=>[(0,t.Wm)(la,{modelValue:F.form.tanggalJatuhTempo,"onUpdate:modelValue":e[6]||(e[6]=a=>F.form.tanggalJatuhTempo=a),mask:"YYYY-MM-DD",filled:"",ref:"date"},{default:(0,t.w5)((()=>[(0,t._)("div",J,[(0,t.wy)((0,t.Wm)(aa,{label:"Ok",color:"primary",flat:""},null,512),[[da]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"])])])):(0,t.kq)("",!0),(0,t._)("div",null,[(0,t.Wm)(aa,{label:"Submit",outline:"",type:"submit",color:"green",style:{width:"150px"}}),(0,t.Wm)(aa,{label:"Reset",type:"reset",color:"red",outline:"",class:"q-ml-sm",style:{width:"150px"}})])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1})]),(0,t._)("div",N,[(0,t.Wm)(G,{class:"my-card q-pa-md col bg-blue-10"},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{separator:"---",class:"text-white","active-color":"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(O,{label:"Petunjuk penggunaan",icon:"lightbulb"})])),_:1})])),_:1}),(0,t.Wm)(G,{class:"my-card row q-mt-md",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(oa,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)(oa,{class:"col"},{default:(0,t.w5)((()=>[(0,t._)("div",Y,[(0,t._)("div",$,[(0,t.Wm)(ia,{options:F.defaultOptions,onAnimCreated:L.handleAnimation,style:{height:"300px"}},null,8,["options","onAnimCreated"])]),(0,t._)("div",A,[(0,t.Wm)(ma,{color:"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(ua,{subtitle:"Tahap I",side:"left"},{default:(0,t.w5)((()=>[H])),_:1}),(0,t.Wm)(ua,{subtitle:"Tahap 2",side:"right"},{default:(0,t.w5)((()=>[I])),_:1}),(0,t.Wm)(ua,{subtitle:"Tahap 3",side:"right"},{default:(0,t.w5)((()=>[R])),_:1}),(0,t.Wm)(ua,{subtitle:"Tahap 4",side:"right"},{default:(0,t.w5)((()=>[E])),_:1})])),_:1})])])])),_:1})])),_:1})])),_:1})])])])])),_:1})}var L=l(3945),O=l(8620);const K={components:{lottie:L.Z},props:{editMode:Boolean,title:String},data(){return{namaSupplier:[],form:{id_pembelian:this.$generateId(),barangs:[{namaBarang:null,jumlahPembelian:null,hargaSatuan:null,pajak:null,deskripsi:null}],statusPembelian:null,namaSupplier:null,nomorTelepon:null,alamatSupplier:null,tanggalJatuhTempo:null},options:{status:["Lunas","Hutang"]},defaultOptions:{animationData:O},animationSpeed:2}},created(){this.getSupplier()},methods:{handleAnimation:function(a){this.anim=a},stop:function(){this.anim.stop()},play:function(){this.anim.play()},pause:function(){this.anim.pause()},onSpeedChange:function(){this.anim.setSpeed(this.animationSpeed)},getSupplier(){try{this.$api.get("supplier/view_supplier").then((a=>{if(!0!==a.data.status)console.log("data gagal");else{const e=a.data.result;this.rows=e,this.namaSupplier=a.data.result}}))}catch(a){this.$showNotif("Terjadi kesalahan !","negative")}},onSubmit(){try{let a=0;const e=this.form.barangs.map((a=>({namaBarang:a.namaBarang,hargaSatuan:a.hargaSatuan,pajak:a.pajak,jumlahPembelian:a.jumlahPembelian,total:a.jumlahPembelian*a.hargaSatuan+a.jumlahPembelian*a.hargaSatuan*a.pajak/100,stok:a.jumlahPembelian,deskripsi:a.deskripsi})));e.forEach((e=>{a+=e.total}));const l={id_pembelian:this.form.id_pembelian,barangs:e,grandTotal:a,statusPembelian:this.form.statusPembelian,namaSupplier:this.form.namaSupplier,nomorTelepon:this.form.nomorTelepon,alamatSupplier:this.form.alamatSupplier,tanggalJatuhTempo:this.form.tanggalJatuhTempo};this.$api.post("pembelian/add",l).then((a=>{!0!==a.data.status?this.$showNotif(a.data.message,"negative"):(this.$router.go(-1),this.$showNotif("Data penjualan berhasil di input !","positive"))}))}catch(a){this.$showNotif("Terjadi kesalahan !","negative")}},onReset(){for(const a in this.form.barangs)this.form.barangs[a].namaBarang=null,this.form.barangs[a].jumlahPembelian=null,this.form.barangs[a].hargaSatuan=null,this.form.barangs[a].pajak=null,this.form.barangs[a].deskripsi=null,a>0&&this.form.barangs.splice(a);this.form.tanggal_jatuh_tempo=null,this.form.alamat_penagihan=null,this.form.nomor_telepon=null,this.form.pelanggan=null,this.form.status_penjualan=null},add(a){this.form.barangs.push({namaBarang:null,jumlahPembelian:null,hargaSatuan:null,pajak:null,deskripsi:null})},remove(a){this.form.barangs.splice(a,1)}}};var G=l(4379),X=l(151),aa=l(1481),ea=l(5926),la=l(5589),ta=l(1993),na=l(5269),sa=l(4689),oa=l(2165),ia=l(3314),ua=l(4554),ma=l(3944),ra=l(5836),da=l(1432),pa=l(3424),ca=l(677),ga=l(7518),ha=l.n(ga);K.render=F;const ba=K;ha()(K,"components",{QPage:G.Z,QCard:X.Z,QBreadcrumbs:aa.Z,QBreadcrumbsEl:ea.Z,QCardSection:la.Z,QTable:ta.Z,QForm:na.Z,QInput:sa.Z,QBtn:oa.Z,QSelect:ia.Z,QIcon:ua.Z,QPopupProxy:ma.Z,QDate:ra.Z,QTimeline:da.Z,QTimelineEntry:pa.Z}),ha()(K,"directives",{ClosePopup:ca.Z});const fa={components:{formPembelian:ba}};fa.render=n;const _a=fa}}]);