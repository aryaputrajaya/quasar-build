"use strict";(self["webpackChunksalsavica"]=self["webpackChunksalsavica"]||[]).push([[3786],{3786:(a,e,l)=>{l.r(e),l.d(e,{default:()=>E});var t=l(3673),i=l(8880),s=l(2323);const n={class:"col col-lg-12 col-md-6 col-sm-8 col-xs-10 q-pt-md"},o={class:"row q-mt-lg"},r={class:"row q-gutter-md col-12"},m=(0,t._)("div",{class:"text-h6 q-mt-sm",style:{"font-size":"14px"}},"Data pembelian belum dibayar",-1),d=(0,t._)("div",{class:"text-caption text-grey",style:{"font-size":"11px"}}," semua data pembelian belum dibayar. ",-1),u={class:"row items-center"},p={class:"text-h6 q-ml-sm text-blue-13",style:{"font-size":"12px"}},c=(0,t._)("div",{class:"text-h6 q-mt-sm",style:{"font-size":"14px"}},"Data pembelian",-1),b=(0,t._)("div",{class:"text-caption text-grey",style:{"font-size":"11px"}}," berisi semua data pembelian salsafical. ",-1),g={class:"row items-center"},f={class:"text-h6 q-ml-sm text-blue-13",style:{"font-size":"12px"}},h={class:"row col-12 q-mt-md"},w=(0,t._)("div",{class:"col"},[(0,t._)("div",{class:"col-2 q-table__title"},"Master Data Pembelian"),(0,t._)("p",{class:"text-caption"},"Data pembelian yang di lakukan di dalam sistem salsafical.")],-1),_={key:0},k={key:1},q=(0,t._)("div",{class:"text-h6"},"#Detail Pembelian Barang",-1),W={class:"text-caption q-ml-md"},v=(0,t.Uk)("supplier: "),y={class:"text-h8 q-ml-md"},P=(0,t._)("b",null,"Grand Total - ",-1);function T(a,e,l,T,x,z){const S=(0,t.up)("q-breadcrumbs-el"),D=(0,t.up)("q-breadcrumbs"),Z=(0,t.up)("q-card"),Q=(0,t.up)("q-icon"),j=(0,t.up)("vue3-autocounter"),$=(0,t.up)("q-card-section"),N=(0,t.up)("q-space"),A=(0,t.up)("q-btn"),B=(0,t.up)("q-input"),C=(0,t.up)("q-slide-transition"),U=(0,t.up)("q-td"),H=(0,t.up)("q-tr"),I=(0,t.up)("q-table"),V=(0,t.up)("q-separator"),J=(0,t.up)("q-card-actions"),L=(0,t.up)("q-dialog"),M=(0,t.up)("q-page"),G=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(M,{class:"q-pr-md q-pl-md q-pa-md"},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t.Wm)(Z,{class:"my-card q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{separator:"---",class:"text-blue-10","active-color":"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{label:"Main Menu",icon:"widgets"}),(0,t.Wm)(S,{label:"Data Barang",icon:"extension"}),(0,t.Wm)(S,{label:"Pembelian",icon:"shopping_bag"})])),_:1})])),_:1}),(0,t._)("div",o,[(0,t._)("div",r,[(0,t.Wm)(Z,{class:"my-card col-lg-3 col-md-4 col-sm-7",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)($,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)($,{class:"q-pt-xs"},{default:(0,t.w5)((()=>[m,d,(0,t._)("div",u,[(0,t.Wm)(Q,{name:"payment"}),(0,t._)("div",p,[(0,t.Wm)(j,{ref:"counter",startAmount:0,endAmount:Number(x.totalHutang),duration:3,autoinit:!0},null,8,["endAmount"])])])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(Z,{class:"my-card col-lg-3 col-md-4 col-sm-7",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)($,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)($,{class:"q-pt-xs"},{default:(0,t.w5)((()=>[c,b,(0,t._)("div",g,[(0,t.Wm)(Q,{name:"credit_score"}),(0,t._)("div",f,[(0,t.Wm)(j,{ref:"counter",startAmount:0,endAmount:Number(x.totalLunas),duration:3,autoinit:!0},null,8,["endAmount"])])])])),_:1})])),_:1})])),_:1})]),(0,t._)("div",h,[(0,t.Wm)(Z,{class:"my-card col",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)($,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)($,{class:"col-12 q-pa-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{title:"Master Data Pembelian","aria-label":"Text",class:"text-h5",rows:x.rows,flat:"",columns:x.columns,"row-key":"name",filter:x.filter},{top:(0,t.w5)((()=>[w,(0,t.Wm)(N),(0,t.Wm)(A,{flat:"",round:"",color:"primary",icon:"search",onClick:e[0]||(e[0]=a=>x.visibles=!x.visibles),size:"md",class:"q-mr-sm"}),(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t._)("div",null,[(0,t.Wm)(B,{outlined:"",debounce:"300",placeholder:"Placeholder",style:{width:"300px"},color:"primary",modelValue:x.filter,"onUpdate:modelValue":e[1]||(e[1]=a=>x.filter=a),dense:""},null,8,["modelValue"])],512),[[i.F8,x.visibles]])])),_:1}),(0,t.Wm)(A,{dense:"",icon:"add",class:"q-ml-md q-pr-md",color:"blue-13",label:"Tambah Pembelian",to:{name:"pembelian_add"},size:"md",outline:""})])),body:(0,t.w5)((a=>[(0,t.Wm)(H,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{key:"id_pembelian",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(a.row.id_pembelian),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"namaSupplier",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(a.row.dataSupplier[0].namaSupplier),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"nomorTelepon",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(a.row.nomorTelepon),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"statusPembelian",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(a.row.statusPembelian),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"tanggalJatuhTempo",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(this.$parseDate(a.row.tanggalJatuhTempo).fullDate),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"alamatSupplier",props:a},{default:(0,t.w5)((()=>["Hutang"===a.row.statusPembelian?((0,t.wg)(),(0,t.iD)("label",_,(0,s.zw)(a.row.alamatSupplier),1)):((0,t.wg)(),(0,t.iD)("label",k,(0,s.zw)("-")))])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"grandTotal",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(this.$formatPrice(a.row.grandTotal)),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"barang",props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{onClick:e=>z.showDetail(a.row._id,a.row.supplier,a.row.grandTotal),outline:"",color:"primary",label:"detail",size:"sm",class:"q-ml-sm"},null,8,["onClick"])])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"aksi",props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{round:"",outline:"",color:"red",onClick:e=>this.delete(a.row._id),size:"sm",icon:"delete","no-caps":"",class:"q-ml-sm"},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])),_:1})])),_:1})])),_:1})]),(0,t.Wm)(L,{modelValue:x.detail.visible,"onUpdate:modelValue":e[2]||(e[2]=a=>x.detail.visible=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,null,{default:(0,t.w5)((()=>[(0,t.Wm)($,null,{default:(0,t.w5)((()=>[q,(0,t._)("p",W,[v,(0,t._)("b",null,(0,s.zw)(x.detail.supplier),1)])])),_:1}),(0,t.Wm)(V),(0,t.Wm)($,{style:{"max-height":"50vh"},class:"scroll"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{rows:x.detail.rows,"row-key":"name",flat:"",columns:x.detail.columns,"hide-pagination":!0},null,8,["rows","columns"])])),_:1}),(0,t.Wm)(V),(0,t.Wm)($,null,{default:(0,t.w5)((()=>[(0,t._)("div",y,[P,(0,t.Uk)((0,s.zw)(this.$formatPrice(x.detail.grandTotal)),1)])])),_:1}),(0,t.Wm)(J,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(A,{flat:"",label:"Ok",color:"primary"},null,512),[[G]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])),_:1})}var x=l(7281);const z={name:"PageIndex",components:{"vue3-autocounter":x.Z},data(){return{visibles:!1,filter:null,totalHutang:0,totalLunas:0,columns:[{name:"id_pembelian",required:!0,label:"ID Pembelian",align:"left",field:"id_pembelian",sortable:!0},{name:"namaSupplier",required:!0,label:"Nama Supplier",align:"left",field:"namaSupplier",sortable:!0},{name:"nomorTelepon",required:!0,label:"Nomor Telepon",align:"left",field:"nomorTelepon",sortable:!0},{name:"statusPembelian",required:!0,label:"Status Pembelian",align:"left",field:"statusPembelian",sortable:!0},{name:"tanggalJatuhTempo",required:!0,label:"Tanggal jatuh tempo",align:"left",field:"tanggalJatuhTempo",sortable:!0},{name:"alamatSupplier",required:!0,label:"Alamat supplier",align:"left",field:"alamatSupplier",sortable:!0},{name:"grandTotal",required:!0,label:"Grand Total",align:"left",field:"grandTotal",sortable:!0},{name:"barang",required:!0,label:"Detail Barang",align:"left",field:"barang",sortable:!0},{name:"aksi",label:"Actions",field:"aksi",align:"center"}],rows:[],detail:{visible:!1,grandTotal:null,supplier:null,columns:[{name:"idPembelian",required:!0,label:"ID Pembelian",align:"left",field:"idPembelian",sortable:!0},{name:"namaBarang",required:!0,label:"Nama Barang",align:"left",field:"namaBarang",sortable:!0},{name:"hargaSatuan",required:!0,label:"Harga Satuan",align:"left",field:"hargaSatuan",sortable:!0},{name:"jumlahPembelian",required:!0,label:"Jumlah Pembelian",align:"left",field:"jumlahPembelian",sortable:!0},{name:"pajak",required:!0,label:"Pajak",align:"left",field:"pajak",sortable:!0},{name:"total",required:!0,label:"Subtotal",align:"left",field:"total",sortable:!0},{name:"stok",required:!0,label:"Stok",align:"left",field:"stok",sortable:!0},{name:"deskripsi",required:!0,label:"Deskripsi",align:"left",field:"deskripsi",sortable:!0}],rows:[]}}},created(){this.getPembelian()},methods:{getPembelian(){try{this.$api.get("pembelian/get").then((a=>{if(!0!==a.data.status)this.$showNotif(a.data.message,"negative");else{const e=a.data.result;this.rows=e;for(let a=0;a<e.length;a++)"Lunas"===e[a].statusPembelian&&(this.totalLunas+=e[a].grandTotal),"Hutang"===e[a].statusPembelian&&(this.totalHutang+=e[a].grandTotal)}}))}catch(a){this.$showNotif("Terjadi kesalahan !","negative")}},showDetail(a,e,l){try{this.$api.get("pembelian/detail/"+a).then((a=>{!0!==a.data.status?this.$showNotif(a.data.message,"negative"):(this.detail.rows=a.data.result.map((a=>({_id:a._id,objectIdPembelian:a.objectIdPembelian,idPembelian:a.idPembelian,namaBarang:a.namaBarang,hargaSatuan:this.$formatPrice(a.hargaSatuan),jumlahPembelian:a.jumlahPembelian,pajak:a.pajak+"%",stok:a.stok,deskripsi:a.deskripsi,total:this.$formatPrice(a.total)}))),this.detail.supplier=e,this.detail.grandTotal=l,this.detail.visible=!0)})),this.detail.visible=!0}catch(t){console.log(t),this.$showNotif("Terjadi kesalahan !","negative")}},delete(a){this.$dialog.create({title:"Peringatan",message:"Apakah Anda Yakin ?",cancel:!0,persistent:!0}).onOk((()=>{try{this.$api.delete("/pembelian/delete/"+a).then((a=>{!0!==a.data.status?this.$showNotif(a.data.message,"negative"):(this.totalLunas=0,this.totalHutang=0,this.getPembelian(),this.$showNotif(a.data.message,"positive"))}))}catch(e){console.log(e),this.$showNotif("Terjadi kesalahan !","negative")}}))}}};var S=l(4379),D=l(151),Z=l(1481),Q=l(5926),j=l(5589),$=l(4554),N=l(1993),A=l(2025),B=l(2165),C=l(2471),U=l(4689),H=l(8186),I=l(3884),V=l(6778),J=l(5869),L=l(9367),M=l(677),G=l(7518),O=l.n(G);z.render=T;const E=z;O()(z,"components",{QPage:S.Z,QCard:D.Z,QBreadcrumbs:Z.Z,QBreadcrumbsEl:Q.Z,QCardSection:j.Z,QIcon:$.Z,QTable:N.Z,QSpace:A.Z,QBtn:B.Z,QSlideTransition:C.Z,QInput:U.Z,QTr:H.Z,QTd:I.Z,QDialog:V.Z,QSeparator:J.Z,QCardActions:L.Z}),O()(z,"directives",{ClosePopup:M.Z})}}]);