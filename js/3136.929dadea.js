"use strict";(self["webpackChunksalsavica"]=self["webpackChunksalsavica"]||[]).push([[3136],{3136:(a,e,l)=>{l.r(e),l.d(e,{default:()=>J});var t=l(3673),n=l(8880),s=l(2323);const o={class:"col col-lg-12 col-md-6 col-sm-8 col-xs-10 q-pt-md"},r={class:"row q-mt-lg"},i={class:"row q-gutter-md col-12"},u=(0,t._)("div",{class:"text-h6 q-mt-sm",style:{"font-size":"14px"}},"Penjualan belum dibayar",-1),d=(0,t._)("div",{class:"text-caption text-grey",style:{"font-size":"11px"}}," semua penjualan yang belum dibayarkan. ",-1),m={class:"row items-center"},p={class:"text-h6 q-ml-sm text-blue-13",style:{"font-size":"12px"}},c=(0,t._)("div",{class:"text-h6 q-mt-sm",style:{"font-size":"14px"}},"Data penjualan",-1),g=(0,t._)("div",{class:"text-caption text-grey",style:{"font-size":"11px"}}," berisi semua data penjualan salsafical. ",-1),f={class:"row items-center"},_={class:"text-h6 q-ml-sm text-blue-13",style:{"font-size":"12px"}},w={class:"row col-12 q-mt-md"},h=(0,t._)("div",{class:"col"},[(0,t._)("div",{class:"col-2 q-table__title"},"Master Data Penjualan"),(0,t._)("p",{class:"text-caption"},"Data penjualan yang di lakukan di dalam sistem salsafical.")],-1),b={key:0},q={key:1},j={class:"text-h6"},k={class:"text-h8"},W=(0,t._)("b",null,"Grand Total - ",-1);function y(a,e,l,y,v,x){const z=(0,t.up)("q-breadcrumbs-el"),P=(0,t.up)("q-breadcrumbs"),T=(0,t.up)("q-card"),D=(0,t.up)("q-icon"),Z=(0,t.up)("vue3-autocounter"),Q=(0,t.up)("q-card-section"),$=(0,t.up)("q-space"),A=(0,t.up)("q-btn"),C=(0,t.up)("q-input"),N=(0,t.up)("q-slide-transition"),U=(0,t.up)("q-td"),S=(0,t.up)("q-tr"),H=(0,t.up)("q-table"),I=(0,t.up)("q-separator"),V=(0,t.up)("q-card-actions"),L=(0,t.up)("q-dialog"),M=(0,t.up)("q-page"),B=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(M,{class:"q-pr-md q-pl-md q-pa-md"},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t.Wm)(T,{class:"my-card q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{separator:"---",class:"text-blue-10","active-color":"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{label:"Main Menu",icon:"widgets"}),(0,t.Wm)(z,{label:"Penjualan",icon:"storefront"})])),_:1})])),_:1}),(0,t._)("div",r,[(0,t._)("div",i,[(0,t.Wm)(T,{class:"my-card col-lg-3 col-md-4 col-sm-7",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{class:"q-pt-xs"},{default:(0,t.w5)((()=>[u,d,(0,t._)("div",m,[(0,t.Wm)(D,{name:"payment"}),(0,t._)("div",p,[(0,t.Wm)(Z,{ref:"counter",startAmount:0,endAmount:Number(v.totalHutang),duration:1,prefix:"IDR ",separator:".",decimalSeparator:".",decimals:0,autoinit:!0},null,8,["endAmount"])])])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(T,{class:"my-card col-lg-3 col-md-4 col-sm-7",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{class:"q-pt-xs"},{default:(0,t.w5)((()=>[c,g,(0,t._)("div",f,[(0,t.Wm)(D,{name:"credit_score"}),(0,t._)("div",_,[(0,t.Wm)(Z,{ref:"counter",startAmount:0,endAmount:Number(v.totalLunas),duration:1,prefix:"IDR ",separator:".",decimalSeparator:".",decimals:0,autoinit:!0},null,8,["endAmount"])])])])),_:1})])),_:1})])),_:1})]),(0,t._)("div",w,[(0,t.Wm)(T,{class:"my-card col",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{class:"col-12 q-pa-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{title:"Master Data Produk","aria-label":"Text",class:"text-h5",rows:v.rows,flat:"",columns:v.columns,"row-key":"name",filter:v.filterData},{top:(0,t.w5)((()=>[h,(0,t.Wm)($),(0,t.Wm)(A,{flat:"",round:"",color:"primary",icon:"search",onClick:e[0]||(e[0]=a=>v.visibles=!v.visibles),size:"md",class:"q-mr-sm"}),(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t._)("div",null,[(0,t.Wm)(C,{outlined:"",debounce:"300",placeholder:"Placeholder",style:{width:"300px"},color:"primary",modelValue:v.filterData,"onUpdate:modelValue":e[1]||(e[1]=a=>v.filterData=a),dense:""},null,8,["modelValue"])],512),[[n.F8,v.visibles]])])),_:1}),(0,t.Wm)(A,{dense:"",icon:"add",class:"q-ml-md q-pr-md",color:"blue-13",to:{name:"penjualan_add"},label:"Tambah Penjualan",size:"md",outline:""})])),body:(0,t.w5)((a=>[(0,t.Wm)(S,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{key:"id_penjualan",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(a.row.id_penjualan),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"pelanggan",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(a.row.pelanggan),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"nomor_telepon",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(a.row.nomor_telepon),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"status_penjualan",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(a.row.status_penjualan),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"tanggal_jatuh_tempo",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(this.$parseDate(a.row.tanggal_jatuh_tempo).fullDate),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"alamat_penagihan",props:a},{default:(0,t.w5)((()=>["Hutang"===a.row.status_penjualan?((0,t.wg)(),(0,t.iD)("label",b,(0,s.zw)(a.row.alamat_penagihan),1)):((0,t.wg)(),(0,t.iD)("label",q,(0,s.zw)("-")))])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"grandTotal",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(this.$formatPrice(a.row.grandTotal)),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"produk",props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{onClick:e=>x.showDetail(a.row.pelanggan,a.row.products,a.row.grandTotal),outline:"",color:"primary",label:"detail",size:"sm",class:"q-ml-sm"},null,8,["onClick"])])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"aksi",props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{round:"",outline:"",color:"red",onClick:e=>this.delete(a.row._id),size:"sm",icon:"delete","no-caps":"",class:"q-ml-sm"},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])),_:1})])),_:1})])),_:1})]),(0,t.Wm)(L,{modelValue:v.detail.visible,"onUpdate:modelValue":e[2]||(e[2]=a=>v.detail.visible=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t._)("div",j,"#Data Pembelian - "+(0,s.zw)(v.detail.pelanggan),1)])),_:1}),(0,t.Wm)(I),(0,t.Wm)(Q,{style:{"max-height":"50vh"},class:"scroll"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{rows:v.detail.rows,"row-key":"name",flat:"",columns:v.detail.columns,"hide-pagination":!0},null,8,["rows","columns"])])),_:1}),(0,t.Wm)(I),(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t._)("div",k,[W,(0,t.Uk)((0,s.zw)(this.$formatPrice(v.detail.grandTotal)),1)])])),_:1}),(0,t.Wm)(V,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(A,{flat:"",label:"Ok",color:"primary"},null,512),[[B]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])),_:1})}var v=l(7281);const x={name:"PageIndex",components:{"vue3-autocounter":v.Z},data(){return{visibles:!1,filterData:null,totalHutang:0,totalLunas:0,columns:[{name:"id_penjualan",required:!0,label:"ID Penjualan",align:"left",field:"id_penjualan",sortable:!0},{name:"pelanggan",required:!0,label:"Nama pelanggan",align:"left",field:"pelanggan",sortable:!0},{name:"nomor_telepon",required:!0,label:"Nomor telepon",align:"left",field:"nomor_telepon",sortable:!0},{name:"status_penjualan",required:!0,label:"Status penjualan",align:"left",field:"status_penjualan",sortable:!0},{name:"tanggal_jatuh_tempo",required:!0,label:"Tanggal jatuh tempo",align:"left",field:"tanggal_jatuh_tempo",sortable:!0},{name:"alamat_penagihan",required:!0,label:"Alamat penagihan",align:"left",field:"alamat_penagihan",sortable:!0},{name:"grandTotal",required:!0,label:"Grand Total",align:"left",field:"grandTotal",sortable:!0},{name:"produk",required:!0,label:"Detail produk",align:"left",field:"produk",sortable:!0},{name:"aksi",label:"Actions",field:"aksi",align:"center"}],rows:[],detail:{visible:!1,pelanggan:null,grandTotal:null,columns:[{name:"nama_product",required:!0,label:"Nama Produk",align:"left",field:"nama_product",sortable:!0},{name:"harga_jual",required:!0,label:"Harga Jual",align:"left",field:"harga_jual",sortable:!0},{name:"jumlah_penjualan",required:!0,label:"Jumlah Penjualan",align:"left",field:"jumlah_penjualan",sortable:!0},{name:"total",required:!0,label:"Subtotal",align:"left",field:"total",sortable:!0}],rows:[]}}},created(){this.getPenjualan()},methods:{getPenjualan(){try{this.$api.get("penjualan/get").then((a=>{if(!0!==a.data.status)this.$showNotif(a.data.message,"negative");else{const e=a.data.result;this.rows=e;for(let a=0;a<e.length;a++)"Lunas"===e[a].status_penjualan&&(this.totalLunas+=e[a].grandTotal),"Hutang"===e[a].status_penjualan&&(this.totalHutang+=e[a].grandTotal)}}))}catch(a){this.$showNotif("Terjadi kesalahan !","negative")}},delete(a){this.$dialog.create({title:"Peringatan",message:"Apakah Anda Yakin ?",cancel:!0,persistent:!0}).onOk((()=>{try{this.$api.delete("/penjualan/delete/"+a).then((a=>{!0!==a.data.status?this.$showNotif(a.data.message,"negative"):(this.totalLunas=0,this.totalHutang=0,this.getPenjualan(),this.$showNotif(a.data.message,"positive"))}))}catch(e){console.log(e),this.$showNotif("Terjadi kesalahan !","negative")}}))},showDetail(a,e,l){const t=e.map((a=>({nama_product:a.nama_product,harga_jual:this.$formatPrice(a.harga_jual),jumlah_penjualan:a.jumlah_penjualan,total:this.$formatPrice(a.total)})));this.detail.pelanggan=a,this.detail.visible=!0,this.detail.rows=t,this.detail.grandTotal=l}}};var z=l(4379),P=l(151),T=l(1481),D=l(5926),Z=l(5589),Q=l(4554),$=l(1993),A=l(2025),C=l(2165),N=l(2471),U=l(4689),S=l(8186),H=l(3884),I=l(6778),V=l(5869),L=l(9367),M=l(677),B=l(7518),G=l.n(B);x.render=y;const J=x;G()(x,"components",{QPage:z.Z,QCard:P.Z,QBreadcrumbs:T.Z,QBreadcrumbsEl:D.Z,QCardSection:Z.Z,QIcon:Q.Z,QTable:$.Z,QSpace:A.Z,QBtn:C.Z,QSlideTransition:N.Z,QInput:U.Z,QTr:S.Z,QTd:H.Z,QDialog:I.Z,QSeparator:V.Z,QCardActions:L.Z}),G()(x,"directives",{ClosePopup:M.Z})}}]);