"use strict";(self["webpackChunksalsavica"]=self["webpackChunksalsavica"]||[]).push([[6337],{6337:(a,l,e)=>{e.r(l),e.d(l,{default:()=>Za});var t=e(3673);function o(a,l,e,o,n,s){const u=(0,t.up)("form-penjualan");return(0,t.wg)(),(0,t.j4)(u,{editMode:!1,title:"Tambah"})}var n=e(2323),s=e(8880);const u={class:"col col-lg-12 col-md-6 col-sm-8 col-xs-10 q-pt-md"},i={class:"row q-mt-sm q-gutter-md"},d={class:"row col fit"},r={class:"col"},m={class:"col-2 q-table__title"},p={class:"text-caption"},c={class:"row q-gutter-sm"},_={class:"col"},h=(0,t._)("div",{class:"col"},null,-1),g={class:"row q-gutter-sm"},f={class:"col"},j=(0,t.Uk)(" Produk tidak ditemukan "),b={class:"col"},w={class:"row q-gutter-sm"},k={class:"col"},v=(0,t._)("label",{class:"text-h6 text-subtitle2"},"%",-1),y=(0,t._)("div",{class:"col"},null,-1),q={class:"row q-gutter-sm"},W={class:"col"},V=(0,t._)("div",{class:"text-caption text-h6 text-grey-6"},"Kategori Produk",-1),x={class:"col"},P=(0,t._)("div",{class:"text-caption text-h6 text-grey-6"},"Jenis Produk",-1),Z={class:"col"},z=(0,t._)("div",{class:"text-caption text-h6 text-grey-6"},"Harga Jual",-1),Q={class:"col"},U=(0,t._)("div",{class:"text-caption text-h6 text-grey-6"},"Total",-1),S={class:"row q-gutter-sm q-mb-md q-mt-xs"},C={class:"col"},T=(0,t._)("div",{class:"col"},null,-1),D={class:"row q-gutter-sm"},M={class:"col"},Y={class:"col"},$={class:"row q-gutter-sm"},I={class:"col"},L={class:"col"},F={key:0,class:"row q-gutter-sm"},N={class:"col"},A={class:"col"},B={class:"row items-center justify-end"},J={class:"row col fit"},R={class:"row q-gutter-sm items-center"},E={class:"col"},H={class:"col"},O=(0,t._)("div",null," Silahkan pilih produk yang akan di jual. ",-1),K=(0,t._)("div",null," Sistem akan mengeluarkan data produk terdaftar berdasarkan pilihan. ",-1),G=(0,t._)("div",null," Masukan jumlah produk yang akan di jual. ",-1),X=(0,t._)("div",null," Sistem akan memberikan total penjualan yang telah dilakukan, selanjutnya tekan tombol submit. ",-1);function aa(a,l,e,o,aa,la){const ea=(0,t.up)("q-breadcrumbs-el"),ta=(0,t.up)("q-breadcrumbs"),oa=(0,t.up)("q-card"),na=(0,t.up)("q-input"),sa=(0,t.up)("q-item-label"),ua=(0,t.up)("q-item-section"),ia=(0,t.up)("q-item"),da=(0,t.up)("q-select"),ra=(0,t.up)("q-separator"),ma=(0,t.up)("q-btn"),pa=(0,t.up)("q-date"),ca=(0,t.up)("q-popup-proxy"),_a=(0,t.up)("q-icon"),ha=(0,t.up)("q-form"),ga=(0,t.up)("q-card-section"),fa=(0,t.up)("lottie"),ja=(0,t.up)("q-timeline-entry"),ba=(0,t.up)("q-timeline"),wa=(0,t.up)("q-page"),ka=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(wa,{class:"q-pr-md q-pl-md q-pa-md"},{default:(0,t.w5)((()=>[(0,t._)("div",u,[(0,t.Wm)(oa,{class:"my-card q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(ta,{separator:"---",class:"text-blue-10","active-color":"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(ea,{label:"Main Menu",icon:"widgets"}),(0,t.Wm)(ea,{label:"Penjualan",icon:"storefront"}),this.editMode?((0,t.wg)(),(0,t.j4)(ea,{key:0,label:"Edit Penjualan",icon:"edit"})):((0,t.wg)(),(0,t.j4)(ea,{key:1,label:"Tambah Penjualan",icon:"add"}))])),_:1})])),_:1}),(0,t._)("div",i,[(0,t._)("div",d,[(0,t.Wm)(oa,{class:"my-card col",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(ga,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)(ga,{class:"col q-pa-lg"},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t._)("div",m,(0,n.zw)(this.title)+" Data Penjualan",1),(0,t._)("p",p,"Form "+(0,n.zw)(this.title)+" data penjualan salsafical.",1)]),(0,t.Wm)(ha,{onSubmit:la.onSubmit,onReset:la.onReset},{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t._)("div",_,[(0,t.Wm)(na,{filled:"",modelValue:aa.form.id_penjualan,"onUpdate:modelValue":l[0]||(l[0]=a=>aa.form.id_penjualan=a),label:"Penjualan ID","lazy-rules":"",dense:"",readonly:"",rules:[a=>a&&a.length>0||"Please type something"]},null,8,["modelValue","rules"])]),h]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(aa.form.products,((e,o)=>((0,t.wg)(),(0,t.iD)("div",{key:o},[(0,t._)("div",g,[(0,t._)("div",f,[(0,t.Wm)(da,{filled:"",modelValue:e.product,"onUpdate:modelValue":a=>e.product=a,label:"Nama Product","option-value":"_id","option-label":"nama_product",options:aa.options.products,"use-input":"",onFilter:la.filterProduct,outlined:"",dense:"",rules:[a=>a||"Nama produk tidak boleh kosong !"]},{option:(0,t.w5)((a=>[(0,t.Wm)(ia,(0,n.vs)((0,t.F4)(a.itemProps)),{default:(0,t.w5)((()=>[(0,t.Wm)(ua,null,{default:(0,t.w5)((()=>[(0,t.Wm)(sa,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.opt.nama_product),1)])),_:2},1024),(0,t.Wm)(sa,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)("stok - "+(0,n.zw)(a.opt.stok),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"no-option":(0,t.w5)((()=>[(0,t.Wm)(ia,null,{default:(0,t.w5)((()=>[(0,t.Wm)(ua,{class:"text-grey"},{default:(0,t.w5)((()=>[j])),_:1})])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue","options","onFilter","rules"])]),(0,t._)("div",b,[(0,t.Wm)(na,{filled:"",modelValue:e.jumlah_penjualan,"onUpdate:modelValue":a=>e.jumlah_penjualan=a,label:"Jumlah penjualan","lazy-rules":"",dense:"",rules:[a=>a&&a>0||"Jumlah penjualan tidak boleh 0 / kosong !"]},null,8,["modelValue","onUpdate:modelValue","rules"])])]),(0,t._)("div",w,[(0,t._)("div",k,[(0,t.Wm)(na,{filled:"",modelValue:a.pajak,"onUpdate:modelValue":l[1]||(l[1]=l=>a.pajak=l),label:"Pajak","lazy-rules":"",dense:"",rules:[a=>a&&a>0||"Pajak tidak boleh 0 / kosong !"]},{append:(0,t.w5)((()=>[v])),_:1},8,["modelValue","rules"])]),y]),(0,t.Wm)(ra,{class:"q-mt-xs q-mb-xs"}),(0,t._)("div",q,[(0,t._)("div",W,[V,(0,t.Uk)(" "+(0,n.zw)(e.product?e.product.kategori:"--"),1)]),(0,t._)("div",x,[P,(0,t.Uk)(" "+(0,n.zw)(e.product?e.product.jenis:"--"),1)]),(0,t._)("div",Z,[z,(0,t.Uk)(" "+(0,n.zw)(this.$formatPrice(e.product?e.product.harga_jual:0)),1)]),(0,t._)("div",Q,[U,(0,t.Uk)(" "+(0,n.zw)(this.$formatPrice(e.product?e.product.harga_jual*e.jumlah_penjualan:0)),1)])]),(0,t._)("div",S,[(0,t._)("div",C,[(0,t.wy)((0,t.Wm)(ma,{size:"sm",outline:"",class:"q-mr-md",icon:"add",type:"submit",color:"green",onClick:a=>la.add(o)},null,8,["onClick"]),[[s.F8,o==aa.form.products.length-1]]),(0,t.wy)((0,t.Wm)(ma,{size:"sm",outline:"",icon:"delete_outline",type:"submit",color:"red",onClick:a=>la.remove(o)},null,8,["onClick"]),[[s.F8,o||!o&&aa.form.products.length>1]])]),T])])))),128)),(0,t._)("div",D,[(0,t._)("div",M,[(0,t.Wm)(da,{outlined:"",modelValue:aa.form.status_penjualan,"onUpdate:modelValue":l[2]||(l[2]=a=>aa.form.status_penjualan=a),dense:"","lazy-rules":"",filled:"",options:aa.options.status,label:"Status penjualan"},null,8,["modelValue","options"])]),(0,t._)("div",Y,[(0,t.Wm)(na,{filled:"",modelValue:aa.form.pelanggan,"onUpdate:modelValue":l[3]||(l[3]=a=>aa.form.pelanggan=a),label:"Pelanggan","lazy-rules":"",dense:"",rules:[a=>a&&null!==a||"Lengkapi data pelanggan"]},null,8,["modelValue","rules"])])]),(0,t._)("div",$,[(0,t._)("div",I,[(0,t.Wm)(na,{filled:"",modelValue:aa.form.jumlah_pembayaran,"onUpdate:modelValue":l[4]||(l[4]=a=>aa.form.jumlah_pembayaran=a),label:"Jumlah pembayaran","lazy-rules":"",dense:"",rules:[a=>a&&a.length>0||"Lengkapi data nomor telepon"]},null,8,["modelValue","rules"])]),(0,t._)("div",L,[(0,t.Wm)(na,{filled:"",modelValue:aa.form.nomor_telepon,"onUpdate:modelValue":l[5]||(l[5]=a=>aa.form.nomor_telepon=a),label:"Nomor Telepon","lazy-rules":"",dense:"",rules:[a=>a&&a.length>0||"Lengkapi data nomor telepon"]},null,8,["modelValue","rules"])])]),"Hutang"===this.form.status_penjualan?((0,t.wg)(),(0,t.iD)("div",F,[(0,t._)("div",N,[(0,t.Wm)(na,{filled:"",modelValue:aa.form.alamat_penagihan,"onUpdate:modelValue":l[6]||(l[6]=a=>aa.form.alamat_penagihan=a),label:"Alamat penagihan","lazy-rules":"",dense:"",rules:[a=>a&&a.length>0||"Lengkapi data alamat penagihan"]},null,8,["modelValue","rules"])]),(0,t._)("div",A,[(0,t.Wm)(na,{modelValue:aa.form.tanggal_jatuh_tempo,"onUpdate:modelValue":l[8]||(l[8]=a=>aa.form.tanggal_jatuh_tempo=a),filled:"",label:"Tanggal jatuh tempo",dense:"",rules:["YYYY-MM-DD"]},{append:(0,t.w5)((()=>[(0,t.Wm)(_a,{name:"event",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(ca,{ref:"form.tanggal_jatuh_tempo",breakpoint:600},{default:(0,t.w5)((()=>[(0,t.Wm)(pa,{modelValue:aa.form.tanggal_jatuh_tempo,"onUpdate:modelValue":l[7]||(l[7]=a=>aa.form.tanggal_jatuh_tempo=a),mask:"YYYY-MM-DD",filled:"",ref:"date"},{default:(0,t.w5)((()=>[(0,t._)("div",B,[(0,t.wy)((0,t.Wm)(ma,{label:"Ok",color:"primary",flat:""},null,512),[[ka]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"])])])):(0,t.kq)("",!0),(0,t._)("div",null,[(0,t.Wm)(ma,{label:"Submit",outline:"",type:"submit",color:"green",style:{width:"150px"}}),(0,t.Wm)(ma,{label:"Reset",type:"reset",color:"red",outline:"",class:"q-ml-sm",style:{width:"150px"}})])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1})]),(0,t._)("div",J,[(0,t.Wm)(oa,{class:"my-card q-pa-md col bg-blue-10"},{default:(0,t.w5)((()=>[(0,t.Wm)(ta,{separator:"---",class:"text-white","active-color":"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(ea,{label:"Petunjuk penggunaan",icon:"lightbulb"})])),_:1})])),_:1}),(0,t.Wm)(oa,{class:"my-card row q-mt-md",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(ga,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)(ga,{class:"col"},{default:(0,t.w5)((()=>[(0,t._)("div",R,[(0,t._)("div",E,[(0,t.Wm)(fa,{options:aa.defaultOptions,onAnimCreated:la.handleAnimation,style:{height:"250px"}},null,8,["options","onAnimCreated"])]),(0,t._)("div",H,[(0,t.Wm)(ba,{color:"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(ja,{subtitle:"Tahap I",side:"left"},{default:(0,t.w5)((()=>[O])),_:1}),(0,t.Wm)(ja,{subtitle:"Tahap 2",side:"right"},{default:(0,t.w5)((()=>[K])),_:1}),(0,t.Wm)(ja,{subtitle:"Tahap 3",side:"right"},{default:(0,t.w5)((()=>[G])),_:1}),(0,t.Wm)(ja,{subtitle:"Tahap 4",side:"right"},{default:(0,t.w5)((()=>[X])),_:1})])),_:1})])])])),_:1})])),_:1})])),_:1})])])])])),_:1})}var la=e(3945),ea=e(8620);let ta=[];const oa={components:{lottie:la.Z},props:{editMode:Boolean,title:String},data(){return{form:{id_penjualan:this.$generateId(),products:[{product:null,jumlah_penjualan:null}],tanggal_jatuh_tempo:null,alamat_penagihan:null,nomor_telepon:null,pelanggan:null,keterangan_product:null,status_penjualan:null,jumlah_pembayaran:null},options:{products:[],status:["Lunas","Hutang"]},defaultOptions:{animationData:ea},animationSpeed:2}},created(){this.getProduct()},methods:{handleAnimation:function(a){this.anim=a},stop:function(){this.anim.stop()},play:function(){this.anim.play()},pause:function(){this.anim.pause()},onSpeedChange:function(){this.anim.setSpeed(this.animationSpeed)},getProduct(){this.$api.get("product/get").then((a=>{ta=a.data.result.filter((a=>a.stok>0)),console.log(ta)}))},filterProduct(a,l){l(""!==a?()=>{const l=a.toLowerCase();this.options.products=ta.filter((a=>a.nama_product.toLowerCase().indexOf(l)>-1))}:()=>{this.options.products=ta})},onSubmit(){let a=0;const l=this.form.products.map((a=>({object_id:a.product._id,nama_product:a.product.nama_product,harga_jual:a.product.harga_jual,jumlah_penjualan:a.jumlah_penjualan,total:a.product.harga_jual*a.jumlah_penjualan,stokBaru:a.product.stok-a.jumlah_penjualan})));l.forEach((l=>{a+=l.total}));const e={id_penjualan:this.form.id_penjualan,products:l,grandTotal:a,tanggal_jatuh_tempo:this.form.tanggal_jatuh_tempo,alamat_penagihan:this.form.alamat_penagihan,nomor_telepon:this.form.nomor_telepon,pelanggan:this.form.pelanggan,status_penjualan:this.form.status_penjualan,jumlah_pembayaran:this.form.jumlah_pembayaran};try{this.$api.post("penjualan/add",e).then((a=>{!0!==a.data.status?this.$showNotif(a.data.message,"negative"):(this.$router.go(-1),this.$showNotif("Data penjualan berhasil di input !","positive"))}))}catch(t){this.$showNotif("Terjadi kesalahan !","negative")}},onReset(){for(const a in this.form.products)this.form.products[a].product=null,this.form.products[a].jumlah_penjualan=null,a>0&&this.form.products.splice(a);this.form.tanggal_jatuh_tempo=null,this.form.alamat_penagihan=null,this.form.nomor_telepon=null,this.form.pelanggan=null,this.form.status_penjualan=null,this.form.jumlah_pembayaran=null},add(a){this.form.products.push({product:null,jumlah_penjualan:null})},remove(a){this.form.products.splice(a,1)}}};var na=e(4379),sa=e(151),ua=e(1481),ia=e(5926),da=e(5589),ra=e(1993),ma=e(5269),pa=e(4689),ca=e(3314),_a=e(3414),ha=e(2035),ga=e(2350),fa=e(5869),ja=e(2165),ba=e(4554),wa=e(3944),ka=e(5836),va=e(1432),ya=e(3424),qa=e(677),Wa=e(7518),Va=e.n(Wa);oa.render=aa;const xa=oa;Va()(oa,"components",{QPage:na.Z,QCard:sa.Z,QBreadcrumbs:ua.Z,QBreadcrumbsEl:ia.Z,QCardSection:da.Z,QTable:ra.Z,QForm:ma.Z,QInput:pa.Z,QSelect:ca.Z,QItem:_a.Z,QItemSection:ha.Z,QItemLabel:ga.Z,QSeparator:fa.Z,QBtn:ja.Z,QIcon:ba.Z,QPopupProxy:wa.Z,QDate:ka.Z,QTimeline:va.Z,QTimelineEntry:ya.Z}),Va()(oa,"directives",{ClosePopup:qa.Z});const Pa={components:{formPenjualan:xa}};Pa.render=o;const Za=Pa}}]);